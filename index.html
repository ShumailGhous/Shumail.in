<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Langton's Ant Simulator</title>
  <style>
    body {
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #1e1e1e;
      color: white;
      font-family: Arial, sans-serif;
    }
    canvas {
      border: 1px solid #444;
    }
    .info {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.7);
      padding: 10px;
      border-radius: 5px;
    }
    button {
      margin-top: 10px;
      padding: 5px 10px;
      background-color: #444;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 3px;
    }
    button:hover {
      background-color: #666;
    }
  </style>
</head>
<body>
  <div class="info">
    <p><strong>Langton's Ant Enhanced</strong></p>
    <p>Rules: <br> - Move right if block is black <br> - Move left if block is white <br> - Flip block's color</p>
    <button onclick="randomizeGrid()">Randomize Grid</button>
  </div>
  <canvas id="grid"></canvas>

  <script>
    const canvas = document.getElementById('grid');
    const ctx = canvas.getContext('2d');

    // Canvas setup
    const size = 800; // Size of canvas
    const scale = 5; // Size of each grid cell
    canvas.width = size;
    canvas.height = size;

    const cols = size / scale;
    const rows = size / scale;

    // Create grid with random initial state
    let grid = Array.from({ length: rows }, () => 
      Array.from({ length: cols }, () => Math.random() > 0.5 ? 1 : 0)
    );

    // Ant properties
    const ant = { x: Math.floor(cols / 2), y: Math.floor(rows / 2), dir: 0 };
    const directions = [
      [0, -1], // Up
      [1, 0],  // Right
      [0, 1],  // Down
      [-1, 0], // Left
    ];

    // Draw grid
    function drawGrid() {
      for (let y = 0; y < rows; y++) {
        for (let x = 0; x < cols; x++) {
          ctx.fillStyle = grid[y][x] ? 'black' : 'white';
          ctx.fillRect(x * scale, y * scale, scale, scale);
        }
      }
    }

    // Move ant
    function moveAnt() {
      // Flip current cell
      grid[ant.y][ant.x] = grid[ant.y][ant.x] ? 0 : 1;

      // Turn
      ant.dir = (ant.dir + (grid[ant.y][ant.x] ? -1 : 1) + 4) % 4;

      // Move forward
      ant.x = (ant.x + directions[ant.dir][0] + cols) % cols;
      ant.y = (ant.y + directions[ant.dir][1] + rows) % rows;
    }

    // Randomize grid
    function randomizeGrid() {
      grid = Array.from({ length: rows }, () => 
        Array.from({ length: cols }, () => Math.random() > 0.5 ? 1 : 0)
      );
      ant.x = Math.floor(cols / 2);
      ant.y = Math.floor(rows / 2);
      ant.dir = 0;
    }

    // Simulation loop
    function loop() {
      moveAnt();
      drawGrid();
      ctx.fillStyle = 'red';
      ctx.fillRect(ant.x * scale, ant.y * scale, scale, scale);
      requestAnimationFrame(loop);
    }

    drawGrid();
    loop();
  </script>
</body>
</html>
