<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Langton's Ant Simulation</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    h1 {
      font-size: 2em;
      margin-bottom: 20px;
    }

    #grid {
      display: grid;
      grid-template-columns: repeat(51, 10px); /* Medium grid size */
      grid-template-rows: repeat(51, 10px);
      gap: 1px;
      margin-bottom: 20px;
    }

    .cell {
      width: 10px;
      height: 10px;
      background-color: white;
      border: 1px solid #ddd;
    }

    .ant {
      width: 10px;
      height: 10px;
      background-color: red;
      border-radius: 50%;
    }

    .controls {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .controls button {
      padding: 10px 20px;
      margin: 5px;
      font-size: 1em;
      cursor: pointer;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
    }

    .controls input {
      padding: 5px;
      width: 60px;
      margin-top: 10px;
      font-size: 1em;
      text-align: center;
      border-radius: 5px;
    }

    @media (max-width: 600px) {
      #grid {
        grid-template-columns: repeat(31, 10px); /* Shrink grid size */
        grid-template-rows: repeat(31, 10px);
      }

      h1 {
        font-size: 1.5em;
      }
    }

    @media (max-width: 400px) {
      #grid {
        grid-template-columns: repeat(21, 10px); /* Smaller grid for small screens */
        grid-template-rows: repeat(21, 10px);
      }
    }
  </style>
</head>
<body>
  <h1>Langton's Ant Simulation</h1>
  <div id="grid"></div>

  <div class="controls">
    <button onclick="startSimulation()">Start Simulation</button>
    <button onclick="clearGrid()">Clear Grid</button>
    <label for="speed">Simulation Speed:</label>
    <input type="number" id="speed" value="100" min="1" max="500" />
  </div>

  <script>
    const gridSize = 51; // Medium grid size
    const grid = [];
    let ant = null;
    let interval;

    // Create the grid
    function createGrid() {
      const gridContainer = document.getElementById('grid');
      gridContainer.innerHTML = '';

      for (let i = 0; i < gridSize; i++) {
        const row = [];
        for (let j = 0; j < gridSize; j++) {
          const cell = document.createElement('div');
          cell.classList.add('cell');
          gridContainer.appendChild(cell);
          row.push(cell);
        }
        grid.push(row);
      }
    }

    // Start the simulation
    function startSimulation() {
      if (interval) clearInterval(interval);

      // Place the ant at the center
      const centerX = Math.floor(gridSize / 2);
      const centerY = Math.floor(gridSize / 2);
      ant = { x: centerX, y: centerY, direction: 0 }; // 0=Up, 1=Right, 2=Down, 3=Left

      // Add some random black cells in the center
      for (let i = 0; i < 6; i++) {
        const randX = centerX + Math.floor(Math.random() * 3) - 1;
        const randY = centerY + Math.floor(Math.random() * 3) - 1;
        grid[randX][randY].style.backgroundColor = 'black';
      }

      // Set the initial position of the ant
      const antCell = grid[ant.x][ant.y];
      antCell.classList.add('ant');

      // Start the movement loop
      interval = setInterval(() => {
        // Ant movement logic
        const currentCell = grid[ant.x][ant.y];
        if (currentCell.style.backgroundColor === 'white') {
          currentCell.style.backgroundColor = 'black'; // Flip the cell color
          ant.direction = (ant.direction + 1) % 4; // Turn right
        } else {
          currentCell.style.backgroundColor = 'white'; // Flip the cell color
          ant.direction = (ant.direction + 3) % 4; // Turn left
        }

        // Move the ant based on its current direction
        if (ant.direction === 0) ant.y--; // Move up
        if (ant.direction === 1) ant.x++; // Move right
        if (ant.direction === 2) ant.y++; // Move down
        if (ant.direction === 3) ant.x--; // Move left

        // Ensure the ant wraps around the grid edges
        if (ant.x < 0) ant.x = gridSize - 1;
        if (ant.y < 0) ant.y = gridSize - 1;
        if (ant.x >= gridSize) ant.x = 0;
        if (ant.y >= gridSize) ant.y = 0;

        // Update the ant's position on the grid
        const newAntCell = grid[ant.x][ant.y];
        newAntCell.classList.add('ant');
      }, 1000 / document.getElementById('speed').value);
    }

    // Clear the grid
    function clearGrid() {
      grid.forEach(row => row.forEach(cell => {
        cell.style.backgroundColor = 'white';
        cell.classList.remove('ant');
      }));
      if (interval) clearInterval(interval); // Stop the simulation
    }

    // Initialize the grid on page load
    createGrid();
  </script>
</body>
</html>
