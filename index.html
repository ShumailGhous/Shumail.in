<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Langton's Ant Simulation</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background-color: #f0f0f0;
      margin: 0;
    }

    h1 {
      margin-top: 20px;
    }

    #grid {
      display: grid;
      grid-template-columns: repeat(40, 20px);
      grid-template-rows: repeat(40, 20px);
      gap: 1px;
      border: 2px solid #333;
      margin-top: 20px;
    }

    .cell {
      width: 20px;
      height: 20px;
      background-color: white;
      border: 1px solid #ddd;
      cursor: pointer;
    }

    .cell.black {
      background-color: black;
    }

    .button-container {
      margin-top: 20px;
    }

    .experiment-details {
      margin-top: 30px;
      padding: 20px;
      background-color: #fff;
      border: 1px solid #ddd;
      max-width: 600px;
      width: 100%;
    }

    .experiment-details h2 {
      margin-top: 0;
    }
  </style>
</head>
<body>

  <h1>Langton's Ant Simulation</h1>

  <div id="grid"></div>

  <div class="button-container">
    <button id="startButton">Start Simulation</button>
    <button id="pauseButton">Pause Simulation</button>
    <button id="addAntsButton">Add Ants</button>
  </div>

  <div class="experiment-details">
    <h2>Experiment Details</h2>
    <p>This simulation demonstrates Langton's Ant, a simple but intriguing computational experiment.</p>
    <p><strong>Langton's Ant Rules:</strong></p>
    <ul>
      <li>If the ant is on a white square, it turns right and the square turns black.</li>
      <li>If the ant is on a black square, it turns left and the square turns white.</li>
      <li>The ant moves forward one step after each turn.</li>
    </ul>
    <p>The experiment explores how the ant's movement evolves over time, eventually producing complex patterns after many steps. The grid can be resized, and multiple ants can be added for further experimentation.</p>
  </div>

  <script>
    // Simulation variables
    const gridSize = 40;
    const grid = [];
    let ants = [];
    let isRunning = false;
    let intervalId = null;

    // Create the grid
    const gridElement = document.getElementById('grid');
    for (let i = 0; i < gridSize * gridSize; i++) {
      const cell = document.createElement('div');
      cell.classList.add('cell');
      gridElement.appendChild(cell);
      grid.push(cell);
    }

    // Ant constructor
    function Ant(x, y, direction) {
      this.x = x;
      this.y = y;
      this.direction = direction;
    }

    // Ant movement logic
    Ant.prototype.move = function() {
      const currentIndex = this.y * gridSize + this.x;
      const currentCell = grid[currentIndex];

      if (currentCell.classList.contains('black')) {
        this.turnLeft();
        currentCell.classList.remove('black');
      } else {
        this.turnRight();
        currentCell.classList.add('black');
      }

      // Move the ant
      if (this.direction === 'up') {
        this.y = (this.y - 1 + gridSize) % gridSize;
      } else if (this.direction === 'down') {
        this.y = (this.y + 1) % gridSize;
      } else if (this.direction === 'left') {
        this.x = (this.x - 1 + gridSize) % gridSize;
      } else if (this.direction === 'right') {
        this.x = (this.x + 1) % gridSize;
      }
    };

    // Turn the ant left
    Ant.prototype.turnLeft = function() {
      if (this.direction === 'up') this.direction = 'left';
      else if (this.direction === 'left') this.direction = 'down';
      else if (this.direction === 'down') this.direction = 'right';
      else if (this.direction === 'right') this.direction = 'up';
    };

    // Turn the ant right
    Ant.prototype.turnRight = function() {
      if (this.direction === 'up') this.direction = 'right';
      else if (this.direction === 'right') this.direction = 'down';
      else if (this.direction === 'down') this.direction = 'left';
      else if (this.direction === 'left') this.direction = 'up';
    };

    // Start the simulation
    document.getElementById('startButton').addEventListener('click', function() {
      if (!isRunning) {
        isRunning = true;
        intervalId = setInterval(moveAnts, 100);
      }
    });

    // Pause the simulation
    document.getElementById('pauseButton').addEventListener('click', function() {
      if (isRunning) {
        clearInterval(intervalId);
        isRunning = false;
      }
    });

    // Add ants to the grid
    document.getElementById('addAntsButton').addEventListener('click', function() {
      // Add a few ants to random positions
      for (let i = 0; i < 3; i++) {
        const x = Math.floor(Math.random() * gridSize);
        const y = Math.floor(Math.random() * gridSize);
        const direction = ['up', 'down', 'left', 'right'][Math.floor(Math.random() * 4)];
        const ant = new Ant(x, y, direction);
        ants.push(ant);
      }
    });

    // Move all ants
    function moveAnts() {
      ants.forEach(ant => ant.move());
    }

    // Ensure the grid zooming is smooth and not awkward
    window.addEventListener('resize', function() {
      const gridWidth = window.innerWidth < 600 ? 20 : 40;
      gridElement.style.gridTemplateColumns = `repeat(${gridWidth}, 20px)`;
      gridElement.style.gridTemplateRows = `repeat(${gridWidth}, 20px)`;
    });
  </script>
</body>
</html>
